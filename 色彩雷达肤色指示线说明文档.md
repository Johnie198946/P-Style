# 色彩雷达肤色指示线说明文档

## 📋 "肤色应落在粉红线上"的含义

### 一、基本概念

**"肤色应落在粉红线上"** 是专业色彩分析工具（Vectorscope/色彩雷达）中的标准参考线，用于帮助用户判断照片中肤色的准确性。

### 二、色彩雷达的工作原理

在色彩雷达（Color Radar）中：

1. **角度（Angle）**：代表**色相（Hue）**
   - 0° = 红色（R）
   - 120° = 绿色（G）
   - 240° = 蓝色（B）
   - 360° = 回到红色

2. **距离（Radius）**：代表**饱和度（Saturation）**
   - 圆心 = 无饱和度（灰度）
   - 边缘 = 高饱和度（鲜艳）

3. **热力图**：显示图片中所有颜色的分布
   - 每个扇形区域的颜色强度表示该色相和饱和度组合的像素数量

### 三、粉红线的含义

#### 1. 粉红线的位置

- **位置**：在色彩雷达图约 **11 点钟方向**（从圆心向外的直线）
- **角度**：大约在 **-33°** 到 **123°** 之间（取决于色彩空间定义）
- **颜色**：粉红色（`rgba(255, 105, 180, 0.5)`）

#### 2. 粉红线的意义

**粉红线代表标准肤色的色相和饱和度范围**：

- **色相（Hue）**：粉红线对应的角度范围，是大多数健康肤色的典型色相
  - 这个角度范围在橙色和红色之间，偏向暖色调
  - 对应 HSV 色彩空间中的特定色相值

- **饱和度（Saturation）**：粉红线上不同距离的点，代表不同饱和度的肤色
  - 靠近圆心：低饱和度（较淡的肤色）
  - 远离圆心：高饱和度（较鲜艳的肤色）

#### 3. 如何理解"应落在粉红线上"

**理想情况**：
- 照片中**肤色区域的像素**在色彩雷达图上的分布，应该**集中在粉红线附近**
- 这意味着肤色在色相和饱和度上都符合标准范围

**实际情况判断**：

1. **✅ 肤色准确**：
   - 肤色像素的分布集中在粉红线附近
   - 说明肤色没有明显的色偏（如偏黄、偏红、偏绿等）
   - 白平衡和色彩校正正确

2. **❌ 肤色偏黄**：
   - 肤色像素的分布偏向**黄色方向**（粉红线右侧）
   - 说明色温可能过高，或白平衡偏暖

3. **❌ 肤色偏红**：
   - 肤色像素的分布偏向**红色方向**（粉红线左侧）
   - 说明可能过度饱和，或白平衡偏冷

4. **❌ 肤色偏绿**：
   - 肤色像素的分布偏向**绿色方向**（粉红线对侧）
   - 说明白平衡严重偏冷，或存在色偏

5. **❌ 肤色过淡或过浓**：
   - 肤色像素的分布**距离圆心过近**（饱和度太低，肤色过淡）
   - 或**距离圆心过远**（饱和度太高，肤色过浓）

### 四、实际应用场景

#### 场景 1：人像摄影

**目标**：确保人物肤色自然、健康

**操作**：
1. 查看色彩雷达图
2. 观察肤色像素的分布是否在粉红线附近
3. 如果偏离，调整：
   - **色温**：如果偏黄，降低色温；如果偏蓝，提高色温
   - **HSL 调整**：调整橙色和红色的色相、饱和度、明度
   - **白平衡**：使用白平衡工具校正

#### 场景 2：电影调色

**目标**：保持肤色的一致性

**操作**：
1. 对比参考图和用户图的色彩雷达
2. 观察肤色分布的差异
3. 调整色彩分级（Color Grading），使肤色分布接近参考图

#### 场景 3：商业修图

**目标**：确保肤色符合品牌标准

**操作**：
1. 使用色彩雷达检查肤色分布
2. 如果偏离粉红线，使用局部调整工具（如 HSL、可选颜色）校正肤色
3. 确保肤色在粉红线附近，同时保持整体风格

### 五、技术实现

#### 1. 粉红线的绘制

在 `Vectorscope.tsx` 中，粉红线通过以下方式绘制：

```typescript
// Skin Tone Line (肤色指示线)
// 在标准数字示波器中，肤色大约在 10-11 点钟方向
// 角度大约为 -33 度（从 Y 轴（北方）开始计算）
const skinAngle = (Math.PI / 180) * -33; // 转换为弧度

ctx.beginPath();
ctx.moveTo(cx, cy); // 从圆心开始
ctx.lineTo(
  cx + Math.cos(skinAngle - Math.PI / 2) * radius,
  cy + Math.sin(skinAngle - Math.PI / 2) * radius
); // 画到边缘
ctx.strokeStyle = "rgba(255, 105, 180, 0.5)"; // 粉红色，50% 透明度
ctx.lineWidth = 2;
ctx.stroke();
```

#### 2. 肤色检测

虽然当前实现中，粉红线只是作为参考线显示，但理论上可以：

1. **检测肤色区域**：
   - 识别图片中肤色像素（通过 HSV 范围判断）
   - 在色彩雷达图上标记这些像素的分布

2. **计算偏离度**：
   - 计算肤色像素分布与粉红线的距离
   - 给出偏离程度的数值（如：偏离 5°、偏离 10% 饱和度）

3. **提供建议**：
   - 如果偏离粉红线，给出具体的调整建议
   - 例如："肤色偏黄 8°，建议降低色温 200K"

### 六、注意事项

#### 1. 不同人种的肤色差异

**重要**：粉红线是**参考线**，不是绝对标准：

- **亚洲人**：肤色可能稍微偏向黄色方向
- **白种人**：肤色可能稍微偏向红色方向
- **黑种人**：肤色可能距离圆心更近（饱和度较低）

**建议**：
- 粉红线作为**起点参考**，不是终点
- 根据实际拍摄对象和风格需求调整
- 保持肤色自然、健康即可

#### 2. 不同拍摄环境的影响

- **自然光**：肤色分布可能更接近粉红线
- **人工光**：可能产生色偏，需要校正
- **混合光**：可能产生复杂的分布，需要仔细调整

#### 3. 风格化处理

- **电影风格**：可能故意偏离粉红线，营造特定氛围
- **艺术风格**：可能完全忽略粉红线，追求创意效果
- **商业标准**：通常要求肤色接近粉红线，确保自然

### 七、用户界面说明

在 `VisualAnalysisDashboard.tsx` 中，显示以下说明文字：

```
"色彩指南针"：方向表示色相，距中心的距离表示饱和度。
肤色应落在粉红线上。
```

**解释**：
- **"色彩指南针"**：指色彩雷达图，像指南针一样指示颜色方向
- **"方向表示色相"**：角度代表颜色的色相（红、橙、黄、绿、青、蓝、紫）
- **"距中心的距离表示饱和度"**：离圆心越远，颜色越鲜艳
- **"肤色应落在粉红线上"**：理想的肤色分布应该集中在粉红线附近

### 八、总结

**"肤色应落在粉红线上"** 的含义：

1. **参考标准**：粉红线是专业色彩分析工具中的标准参考线
2. **判断依据**：通过观察肤色像素在色彩雷达图上的分布，判断肤色是否准确
3. **调整指导**：如果偏离粉红线，可以通过调整色温、HSL、白平衡等参数校正
4. **灵活应用**：粉红线是参考，不是绝对标准，应根据实际需求和风格调整

**实际应用**：
- ✅ 肤色像素集中在粉红线附近 → 肤色准确
- ⚠️ 肤色像素偏离粉红线 → 需要调整色温或 HSL
- ❌ 肤色像素远离粉红线 → 可能存在严重的色偏或白平衡问题

---

**文档版本**：V1.0  
**创建时间**：2025-01-24  
**说明**：本文档用于解释色彩雷达中"肤色应落在粉红线上"的含义和使用方法

